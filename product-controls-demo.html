<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Controls Demo - Dropi Research</title>
    <link rel="stylesheet" href="assets/css/main-modular.css">
    <style>
        body {
            background: var(--color-neutral-50);
            padding: var(--spacing-lg);
        }

        .demo-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .demo-section {
            background: var(--white);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
            box-shadow: var(--shadow-sm);
        }

        .demo-title {
            font-size: var(--font-size-xl);
            font-weight: 600;
            margin-bottom: var(--spacing-md);
            color: var(--color-primary);
        }

        .demo-description {
            color: var(--text-secondary);
            margin-bottom: var(--spacing-lg);
            line-height: 1.6;
        }

        .responsive-info {
            background: var(--color-primary-50);
            border: 1px solid var(--color-primary-100);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .responsive-info h4 {
            color: var(--color-primary);
            margin-bottom: var(--spacing-sm);
        }

        .responsive-info ul {
            margin: 0;
            padding-left: var(--spacing-lg);
        }

        .responsive-info li {
            margin-bottom: var(--spacing-xs);
        }
    </style>
</head>

<body>
    <div class="demo-container">
        <div class="demo-section">
            <h1 class="demo-title">Product Controls - Improved Layout Demo</h1>
            <div class="demo-description">
                This page demonstrates the improved product controls with better structure, usability, and responsive
                design.
            </div>

            <div class="responsive-info">
                <h4>✨ Responsive Features:</h4>
                <ul>
                    <li><strong>Desktop:</strong> Three-section layout (Search | Filters & Sort | Actions)</li>
                    <li><strong>Tablet (768px):</strong> Stacked layout with grouped controls</li>
                    <li><strong>Mobile (480px):</strong> Collapsible filters with toggle button</li>
                    <li><strong>Accessibility:</strong> Screen reader labels and ARIA attributes</li>
                    <li><strong>Visual Hierarchy:</strong> Clear sections with logical grouping</li>
                </ul>
            </div>
        </div>

        <div class="demo-section">
            <h2 class="demo-title">Product Controls Component</h2>
            <div id="product-controls-container">
                <!-- Product controls will be loaded here -->
            </div>
        </div>

        <div class="demo-section">
            <h2 class="demo-title">Text Visibility Test</h2>
            <div class="demo-description">
                Test selects to verify text is fully visible and not cut off vertically:
            </div>
            <div
                style="display: flex; gap: var(--spacing-md); flex-wrap: wrap; padding: var(--spacing-md); background: var(--color-neutral-50); border-radius: var(--radius-md);">
                <select class="form-control" style="width: 150px;">
                    <option>Test Option 1</option>
                    <option>Test Option 2</option>
                    <option>Long Test Option 3</option>
                </select>
                <select class="form-control" style="width: 180px;">
                    <option>✅ Worth Selling</option>
                    <option>❌ Skip</option>
                    <option>❓ In Research</option>
                    <option>⚪ New</option>
                </select>
                <select class="form-control" style="width: 200px;">
                    <option>Name (A-Z)</option>
                    <option>Name (Z-A)</option>
                    <option>Price (Low to High)</option>
                    <option>Price (High to Low)</option>
                </select>
            </div>
        </div>

        <div class="demo-section">
            <h2 class="demo-title">Testing Instructions</h2>
            <div class="demo-description">
                <ol>
                    <li><strong>Desktop Testing:</strong> Resize your browser window to see the responsive behavior</li>
                    <li><strong>Mobile Testing:</strong> Use browser dev tools to simulate mobile devices</li>
                    <li><strong>Accessibility Testing:</strong> Use screen reader or tab navigation</li>
                    <li><strong>Filter Toggle:</strong> On mobile (480px or less), click the "Filters" button</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="assets/js/utils/component-loader.js"></script>

    <script>
        // Load the product controls component
        async function loadDemo() {
            try {
                const componentLoader = new ComponentLoader();

                // Load product controls into the demo container
                await componentLoader.loadComponent(
                    'product-controls',
                    document.getElementById('product-controls-container')
                );

                // Initialize Lucide icons
                if (window.lucide) {
                    lucide.createIcons();
                }

                // Set up mobile filter toggle functionality
                setupMobileToggle();

                console.log('✅ Product Controls demo loaded successfully');
            } catch (error) {
                console.error('❌ Failed to load demo:', error);
                document.getElementById('product-controls-container').innerHTML =
                    '<div class="error-message">Failed to load product controls component</div>';
            }
        }

        function setupMobileToggle() {
            const mobileFilterToggle = document.getElementById('mobileFilterToggle');
            if (mobileFilterToggle) {
                mobileFilterToggle.addEventListener('click', () => {
                    toggleMobileFilters();
                });
            }

            // Handle window resize
            window.addEventListener('resize', handleWindowResize);
        }

        function toggleMobileFilters() {
            const filterSection = document.querySelector('.filter-section');
            const toggleBtn = document.getElementById('mobileFilterToggle');

            if (filterSection && toggleBtn) {
                const isVisible = filterSection.classList.contains('mobile-visible');

                if (isVisible) {
                    filterSection.classList.remove('mobile-visible');
                    toggleBtn.innerHTML = '<i data-lucide="filter" aria-hidden="true"></i><span>Filters</span>';
                    toggleBtn.setAttribute('aria-expanded', 'false');
                } else {
                    filterSection.classList.add('mobile-visible');
                    toggleBtn.innerHTML = '<i data-lucide="x" aria-hidden="true"></i><span>Close</span>';
                    toggleBtn.setAttribute('aria-expanded', 'true');
                }

                // Re-initialize Lucide icons
                if (window.lucide) {
                    lucide.createIcons();
                }
            }
        }

        function handleWindowResize() {
            const filterSection = document.querySelector('.filter-section');
            const toggleBtn = document.getElementById('mobileFilterToggle');

            // Reset mobile filter state when window becomes larger than mobile breakpoint
            if (window.innerWidth > 480) {
                if (filterSection) {
                    filterSection.classList.remove('mobile-visible');
                }
                if (toggleBtn) {
                    toggleBtn.innerHTML = '<i data-lucide="filter" aria-hidden="true"></i><span>Filters</span>';
                    toggleBtn.setAttribute('aria-expanded', 'false');
                    if (window.lucide) {
                        lucide.createIcons();
                    }
                }
            }
        }

        // Initialize demo when page loads
        document.addEventListener('DOMContentLoaded', loadDemo);
    </script>
</body>

</html>