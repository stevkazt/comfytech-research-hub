<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Detalles del Producto</title>
  <link rel="stylesheet" href="../styles/theme.css">
  <link rel="stylesheet" href="../styles/product-details.css">
  <link rel="stylesheet" href="../styles/findings-form.css">
</head>

<body>
  <div class="main-container">
    <!-- Left Column -->
    <div class="content-column">
      <div id="product-info" class="product-info-section">
        <div class="product-info-columns">
          <div class="product-details-column">
            <h2 id="title">Cargando...</h2>
            <p>
              <strong>ID:</strong> <a href="#" id="product-id-link" data-id=""><span id="product-id">...</span></a> |
              <strong>Precio:</strong> <span id="price">...</span> (Dropi)
            </p>
            <div class="price-suggestions">
              <strong>Precios sugeridos:</strong><br />
              <span id="price-high" class="price-high"></span> |
              <span id="price-standard" class="price-standard"></span> |
              <span id="price-low" class="price-low"></span>
            </div>
          </div>
          <div class="product-status-column">
            <div class="status-select-container">
              <label for="product-status">Product Status:</label>
              <select id="product-status" class="status-select" onchange="updateProductStatus(this.value)">
                <option value="">Select Status...</option>
                <option value="Worth Selling" class="status-worth-selling">✅ Worth Selling</option>
                <option value="Skip" class="status-skip">❌ Skip</option>
                <option value="In Research" class="status-not-sure">❓ In Research</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div id="image-slider">
      </div>
      <!-- Research Data Section -->
      <div class="research-data-section">
        <div class="research-columns">
          <!-- Research Findings Section -->
          <div class="research-section research-column">
            <div class="section-header">
              <h3>📋 Research Findings</h3>
            </div>
            <div id="findings-list" class="research-list"></div>
          </div>
          
          <!-- Trend Analysis Section -->
          <div class="research-section research-column">
            <div class="section-header">
              <h3>📈 Trend Analysis</h3>
            </div>
            <div id="saved-trend-validations" class="research-list"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Sidebar - Streamlined -->
    <div class="sidebar">
      <!-- Product Actions -->
      <div class="tool-section">
        <h4 class="section-title">⚙️ Product Actions</h4>
        <div class="button-grid">
          <button class="tool-btn" onclick="showEditProductModal()">
            <span class="btn-icon">✏️</span>
            <span class="btn-text">Edit Product</span>
          </button>
          <button class="tool-btn" onclick="generateAndCopyPrompt()">
            <span class="btn-icon">🤖</span>
            <span class="btn-text">AI Prompt</span>
          </button>
        </div>
      </div>

      <!-- Research Actions -->
      <div class="tool-section">
        <h4 class="section-title">📝 Research Actions</h4>
        <div class="button-grid">
          <button class="tool-btn" onclick="openFindingsModal()">
            <span class="btn-icon">➕</span>
            <span class="btn-text">Add Finding</span>
          </button>
          <button class="tool-btn" onclick="openTrendsModal()">
            <span class="btn-icon">📈</span>
            <span class="btn-text">Add Trend Data</span>
          </button>
        </div>
      </div>

      <!-- Search Tools -->
      <div class="tool-section">
        <h4 class="section-title">🔍 Search Tools</h4>
        <div class="button-grid">
          <button class="tool-btn" onclick="searchGoogle()">
            <span class="btn-icon">🔍</span>
            <span class="btn-text">Google</span>
          </button>
          <button class="tool-btn" onclick="searchML()">
            <span class="btn-icon">🛒</span>
            <span class="btn-text">MercadoLibre</span>
          </button>
          <button class="tool-btn" onclick="searchAmazon()">
            <span class="btn-icon">📦</span>
            <span class="btn-text">Amazon</span>
          </button>
          <button class="tool-btn" onclick="searchImage()">
            <span class="btn-icon">🖼️</span>
            <span class="btn-text">Image Search</span>
          </button>
        </div>
      </div>

      <!-- Trend Research -->
      <div class="tool-section">
        <h4 class="section-title">📈 Trend Research</h4>
        <div class="button-grid">
          <button class="tool-btn" onclick="searchGoogleTrends()">
            <span class="btn-icon">📈</span>
            <span class="btn-text">Google Trends</span>
          </button>
          <button class="tool-btn" onclick="searchTikTokAds()">
            <span class="btn-icon">🎵</span>
            <span class="btn-text">TikTok Ads</span>
          </button>
          <button class="tool-btn" onclick="searchFacebookAds()">
            <span class="btn-icon">📘</span>
            <span class="btn-text">Facebook Ads</span>
          </button>
          <button class="tool-btn" onclick="searchInstagram()">
            <span class="btn-icon">📷</span>
            <span class="btn-text">Instagram</span>
          </button>
          <button class="tool-btn" onclick="searchYouTube()">
            <span class="btn-icon">▶️</span>
            <span class="btn-text">YouTube</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal HTML structures -->
  <!-- Image Modal -->
  <div class="image-modal" id="imageModal">
    <div class="modal-content">
      <img src="" alt="Product Image" class="modal-image" id="modalImage">
      <div class="modal-nav">
        <button class="modal-button" id="prevButton">❮</button>
        <button class="modal-button" id="nextButton">❯</button>
      </div>
      <button class="modal-close" id="closeModal">✕</button>
      <div class="image-counter" id="imageCounter"></div>
    </div>
  </div>

  <!-- Findings Modal -->
  <div class="form-modal" id="findingsModal">
    <div class="modal-dialog">
      <div class="modal-header">
        <h3>Add Research Finding</h3>
        <button class="modal-close-btn" onclick="closeFindingsModal()">✕</button>
      </div>
      <div class="modal-body">
        <div id="findings-modal-container"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeFindingsModal()">Cancel</button>
        <button class="btn btn-primary" onclick="saveFindingsFromModal()">Save Finding</button>
      </div>
    </div>
  </div>

  <!-- Trends Modal -->
  <div class="form-modal" id="trendsModal">
    <div class="modal-dialog">
      <div class="modal-header">
        <h3>Add Trend Analysis</h3>
        <button class="modal-close-btn" onclick="closeTrendsModal()">✕</button>
      </div>
      <div class="modal-body">
        <div id="trends-modal-container"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeTrendsModal()">Cancel</button>
        <button class="btn btn-primary" onclick="saveTrendsFromModal()">Save Trend Data</button>
      </div>
    </div>
  </div>

  <script>require('../scripts/product-details/index.js');</script>
</body>

</html>